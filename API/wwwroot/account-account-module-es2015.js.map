{"version":3,"sources":["./src/app/account/register/register.component.ts","./src/app/account/register/register.component.html","./src/app/account/login/login.component.ts","./src/app/account/login/login.component.html","./src/app/account/account.module.ts","./src/app/account/account-routing.module.ts"],"names":[],"mappings":"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","file":"account-account-module-es2015.js","sourcesContent":["import { Router } from '@angular/router';\r\nimport { AccountService } from './../account.service';\r\nimport {\r\n  FormGroup,\r\n  FormBuilder,\r\n  Validators,\r\n  AsyncValidatorFn,\r\n} from '@angular/forms';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { timer, of } from 'rxjs';\r\nimport { switchMap, map } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-register',\r\n  templateUrl: './register.component.html',\r\n  styleUrls: ['./register.component.scss'],\r\n})\r\nexport class RegisterComponent implements OnInit {\r\n  registerForm: FormGroup;\r\n  errors: string[];\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private accService: AccountService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.createRegisterForm();\r\n  }\r\n\r\n  createRegisterForm() {\r\n    this.registerForm = this.fb.group({\r\n      displayName: [null, [Validators.required]],\r\n      email: [\r\n        null,\r\n        [\r\n          Validators.required,\r\n          Validators.pattern('^[\\\\w-\\\\.]+@([\\\\w-]+\\\\.)+[\\\\w-]{2,4}$'),\r\n        ],\r\n        [this.validateEmailNotTaken()],\r\n      ],\r\n      password: [null, [Validators.required]],\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n    this.accService.register(this.registerForm.value).subscribe(\r\n      () => {\r\n        console.log('user registered');\r\n        this.router.navigateByUrl('/shop');\r\n      },\r\n      (error) => {\r\n        console.log(error);\r\n        this.errors = error.errors;\r\n      }\r\n    );\r\n  }\r\n\r\n  validateEmailNotTaken(): AsyncValidatorFn {\r\n    return (control) => {\r\n      return timer(500).pipe(\r\n        switchMap(() => {\r\n          if (!control.value) {\r\n            return of(null);\r\n          }\r\n          return this.accService.checkEmailExists(control.value).pipe(\r\n            map((res) => {\r\n              return res ? { emailExists: true } : null;\r\n            })\r\n          );\r\n        })\r\n      );\r\n    };\r\n  }\r\n}\r\n","<div class=\"d-flex justify-content-center mt-5\">\r\n  <div class=\"col-3\">\r\n    <form [formGroup]=\"registerForm\" (ngSubmit)=\"onSubmit()\">\r\n      <div class=\"text-center mb-4\">\r\n        <h1 class=\"h3 mb-3 font-weight-normal\">Register</h1>\r\n      </div>\r\n      <app-text-input\r\n        formControlName=\"displayName\"\r\n        [label]=\"'Display Name'\"\r\n      ></app-text-input>\r\n      <app-text-input\r\n        formControlName=\"email\"\r\n        [label]=\"'Email Address'\"\r\n      ></app-text-input>\r\n      <app-text-input\r\n        formControlName=\"password\"\r\n        [label]=\"'Password'\"\r\n        [type]=\"'password'\"\r\n      ></app-text-input>\r\n\r\n      <ul class=\"text-danger list-unstyled\" *ngIf=\"errors\">\r\n        <li *ngFor=\"let error of errors\">{{ error }}</li>\r\n      </ul>\r\n\r\n      <button\r\n        [disabled]=\"registerForm.invalid\"\r\n        class=\"btn btn-lg btn-primary btn-block\"\r\n        type=\"submit\"\r\n      >\r\n        Sign Up\r\n      </button>\r\n    </form>\r\n  </div>\r\n</div>\r\n","import { Router, ActivatedRoute } from '@angular/router';\r\nimport { AccountService } from './../account.service';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss'],\r\n})\r\nexport class LoginComponent implements OnInit {\r\n  loginForm: FormGroup;\r\n  returnUrl: string;\r\n\r\n  constructor(\r\n    private accService: AccountService,\r\n    private router: Router,\r\n    private activatedRoutes: ActivatedRoute\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.returnUrl =\r\n      this.activatedRoutes.snapshot.queryParams.returnUrl || '/shop';\r\n    this.createLoginForm();\r\n  }\r\n\r\n  createLoginForm() {\r\n    this.loginForm = new FormGroup({\r\n      email: new FormControl('', [\r\n        Validators.required,\r\n        Validators.pattern('^[\\\\w-\\\\.]+@([\\\\w-]+\\\\.)+[\\\\w-]{2,4}$'),\r\n      ]),\r\n      password: new FormControl('', Validators.required),\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n    this.accService.login(this.loginForm.value).subscribe(\r\n      () => {\r\n        console.log('user logged in');\r\n        this.router.navigateByUrl(this.returnUrl);\r\n      },\r\n      (error) => {\r\n        console.log(error);\r\n      }\r\n    );\r\n  }\r\n}\r\n","<div class=\"d-flex justify-content-center mt-5\">\r\n  <div class=\"col-3\">\r\n    <form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\">\r\n      <div class=\"text-center mb-4\">\r\n        <h1 class=\"h3 mb-3 font-weight-normal\">Login</h1>\r\n      </div>\r\n      <app-text-input\r\n        formControlName=\"email\"\r\n        [label]=\"'Email Address'\"\r\n      ></app-text-input>\r\n      <app-text-input\r\n        formControlName=\"password\"\r\n        [label]=\"'Password'\"\r\n        [type]=\"'password'\"\r\n      ></app-text-input>\r\n      <button\r\n        [disabled]=\"loginForm.invalid\"\r\n        class=\"btn btn-lg btn-primary btn-block\"\r\n        type=\"submit\"\r\n      >\r\n        Sign in\r\n      </button>\r\n    </form>\r\n  </div>\r\n</div>\r\n","import { SharedModule } from './../shared/shared.module';\r\nimport { AccountRoutingModule } from './account-routing.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { LoginComponent } from './login/login.component';\r\nimport { RegisterComponent } from './register/register.component';\r\n\r\n@NgModule({\r\n  declarations: [LoginComponent, RegisterComponent],\r\n  imports: [CommonModule, AccountRoutingModule, SharedModule],\r\n})\r\nexport class AccountModule {}\r\n","import { RegisterComponent } from './register/register.component';\r\nimport { LoginComponent } from './login/login.component';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nconst routes: Routes = [\r\n  { path: 'login', component: LoginComponent },\r\n  { path: 'register', component: RegisterComponent },\r\n];\r\n\r\n@NgModule({\r\n  declarations: [],\r\n  imports: [CommonModule, RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class AccountRoutingModule {}\r\n"],"sourceRoot":"webpack:///"}